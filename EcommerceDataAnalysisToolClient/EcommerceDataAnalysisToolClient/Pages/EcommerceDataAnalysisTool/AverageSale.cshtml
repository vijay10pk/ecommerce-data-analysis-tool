@page
@model EcommerceDataAnalysisToolClient.Pages.EcommerceDataAnalysisTool.AverageSaleModel
@{
    ViewData["Title"] = "Average Sales";
}
@using System.Globalization
<div class="card">
    <h2>Average Sales</h2>
    <form>
        <label>
            <input type="radio" name="option" value="year" checked onchange="showBlock()"> Year
        </label>
        <label>
            <input type="radio" name="option" value="month" onchange="showBlock()"> Month
        </label>
    </form>

    <div id="yearBlock" style="display: block;">
        <form method="get" action="" class="form" id="year-form">
            <!-- Modified the id attribute value -->
            <div class="form-group">
                <label for="year">Select a year:</label>
                <select class="form-control" id="year" name="year">
                    <option value="">--Select Year--</option>
                    @for (int i = DateTime.Now.Year; i >= 2014; i--)
                    {
                        <option value="@i">@i</option>
                    }
                </select>
            </div>
            <input type="submit" value="get Summary" class="btn btn-primary" />
        </form>
        <p>Displaying data for the year.</p>
    </div>

    <div id="monthBlock" style="display: none;">
        <!-- Block content for month -->
        <form method="get" action="" class="form" id="category-form">
            <div class="form-group">
                <label for="year">Select a year:</label>
                <select class="form-control" id="year" name="year">
                    <option value="">--Select Year--</option>
                    @for (int i = DateTime.Now.Year; i > 2014; i--)
                    {
                        <option value="@i">@i</option>
                    }
                </select>
            </div>
            <div class="form-group">
                <label for="month">Select a month:</label>
                <select class="form-control" id="month" name="month">
                    <option value="">--Select Month--</option>
                    @for (int j = 1; j <= 12; j++)
                    {
                        <option value="@j">@CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(j)</option>
                    }
                </select>
            </div>
            <input type="submit" value="get Summary" class="btn btn-primary" />
        </form>
        <p>Displaying data for the month.</p>
    </div>

    <script>function showBlock() {
            var option = document.querySelector('input[name="option"]:checked').value;
            if (option === "year") {
                document.getElementById("yearBlock").style.display = "block";
                document.getElementById("monthBlock").style.display = "none";
            } else if (option === "month") {
                document.getElementById("yearBlock").style.display = "none";
                document.getElementById("monthBlock").style.display = "block";
            }
        }</script>

</div>
@if (Model.Average.HasValue)
{
    <div class="card border-success mx-auto mb-3" style="max-width: 18rem;">
        <div class="card-header text-center">Average sale for @Model.Year</div>
        <div class="card-body text-success text-center">
            <h2 class="card-title">@Model.Average</h2>
        </div>
    </div>
}
else if (Model.Year.HasValue)
{
    <div class="alert alert-danger" role="alert">
        Error getting Average sale for @Model.Year.
    </div>
}

